@using DRD.Domain;
@model JsonLayout


@*<link rel="stylesheet" href="/assets/css/demo.css">
    <link rel="stylesheet" href="/assets/css/header-user-dropdown.css">
    <link href='http://fonts.googleapis.com/css?family=Cookie' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="/css/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,100,500,700,900" rel="stylesheet"
          type="text/css">
    <link href="/assets/css/icons/icomoon/styles.css" rel="stylesheet" type="text/css">
    <link href="/assets/css/icons/fontawesome/styles.min.css" rel="stylesheet" type="text/css">
    <link href="/assets/css/bootstrap.css" rel="stylesheet" type="text/css">
    <link href="/assets/css/core.css" rel="stylesheet" type="text/css">
    <link href="/assets/css/components.css" rel="stylesheet" type="text/css">
    <link href="/assets/css/colors.css" rel="stylesheet" type="text/css">

    <script type="text/javascript" src="/assets/js/plugins/loaders/pace.min.js"></script>
    <script type="text/javascript" src="/assets/js/core/libraries/jquery.min.js"></script>
    <script type="text/javascript" src="/assets/js/core/libraries/bootstrap.min.js"></script>
    <script type="text/javascript" src="/assets/js/plugins/loaders/blockui.min.js"></script>*@

<script src="/assets/js/plugins/buttons/spin.min.js" type="text/javascript"></script>
<script src="/assets/js/plugins/buttons/ladda.min.js" type="text/javascript"></script>
<script src="/assets/js/pages/components_buttons.js" type="text/javascript"></script>

<script src="/assets/vendors/angular-1.5.5/angular.js"></script>
<script src="/assets/vendors/angular-1.5.5/angular-animate.js"></script>
<script src="/Scripts/ui-bootstrap-tpls-1.3.2.js"></script>

<script src="/assets/vendors/file-upload/ng-file-upload-shim.min.js"></script>
<script src="/assets/vendors/file-upload/ng-file-upload.min.js"></script>
<script src="/assets/vendors/ng_only_number.js"></script>

<script src="/assets/vendors/angular-1.5.5/angular-sanitize.min.js"></script>

@*http://bootstrapswitch.com/*@
<link href="/assets/vendors/bootstrap-switch/bootstrap3/bootstrap-switch.css" rel="stylesheet" type="text/css" />
<script src="/assets/vendors/bootstrap-switch/bootstrap-switch.js"></script>

@* demo/doc https://uxsolutions.github.io/bootstrap-datepicker/?markup=input&format=&weekStart=&startDate=&endDate=&startView=0&minViewMode=0&maxViewMode=4&todayBtn=false&clearBtn=false&language=en&orientation=auto&multidate=&multidateSeparator=&autoclose=on&keyboardNavigation=on&forceParse=on#sandbox*@
<link id="bsdp-css" href="/assets/vendors/bootstrap-datepicker-1.6.4-dist/css/bootstrap-datepicker3.min.css" rel="stylesheet">
<script src="/assets/vendors/bootstrap-datepicker-1.6.4-dist/js/bootstrap-datepicker.min.js"></script>

<script type="text/javascript" src="/assets/js/plugins/notifications/bootbox.min.js"></script>
<script type="text/javascript" src="/assets/js/plugins/notifications/sweet_alert.min.js"></script>

<script type="text/javascript" src="/assets/js/plugins/forms/styling/uniform.min.js"></script>
<script type="text/javascript" src="/assets/js/plugins/forms/styling/switchery.min.js"></script>
<script type="text/javascript" src="/assets/js/plugins/forms/styling/switch.min.js"></script>

<script src="~/Scripts/xpublic.js"></script>

<style type="text/css">
    .auto-style3 {
        width: 64px;
    }

    .image-wraper {
        float: left;
        margin-right: 10px;
        width: 200px;
        height: 200px;
        overflow: hidden;
        /*border: 1px solid #ddd;*/
        border-radius: 4px;
    }

    .image-content {
        width: 200px;
        /*cursor: pointer;*/
        /*padding: 5px;*/
        /*position: absolute;*/
        margin: auto;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
    }

    .container {
        border: 1px solid red;
        padding: 10px 10px 40px 10px;
        position: relative;
        margin: 0 auto 0 auto;
        height: 100%;
    }

        .container .signature {
            border: 1px solid orange;
            margin: 0 auto;
            cursor: pointer;
        }

            .container .signature canvas {
                border: 1px solid #999;
                margin: 0 auto;
                cursor: pointer;
            }

        .container .buttons {
            position: absolute;
            bottom: 10px;
            left: 10px;
        }

        .container .sizes {
            position: absolute;
            bottom: 10px;
            right: 10px;
        }

            .container .sizes input {
                width: 4em;
                text-align: center;
            }

    .result {
        border: 1px solid blue;
        margin: 30px auto 0 auto;
        height: 220px;
        width: 568px;
    }

    .caption {
        color: darkgrey;
        margin-bottom: -10px;
    }

    .value {
        font-size: large;
    }

    .width-qty {
        width: 150px;
        text-align: right;
        direction: rtl;
    }

    .width-price {
        width: 120px;
        text-align: right;
    }

    .width-total {
        width: 150px;
        text-align: right;
    }

    .width-grandtotal {
        text-align: right;
        font-weight: bold;
    }
</style>



<body @*ng-app="drdApp"*@>
    <!-- Page container -->
    <div class="page-container" ng-controller="drdController">
        <!-- Page content -->
        <div class="page-content">


            <!-- Main content -->
            <div class="content-wrapper">
                <!-- Page header -->
                <div class="page-header page-header-default">
                    <div class="page-header-content">
                        <div class="page-title">
                            <h4><i class="icon-puzzle4 position-left"></i> My Plan</h4>
                        </div>

                    </div>

                </div>
                <!-- /page header -->
                <!-- Horizontal form options -->
                <!-- Content area -->
                <div class="content" id="content" style="display:none;">


                    <!-- Basic layout-->


                    <div class="panel panel-flat">
                        <div class="panel-body">

                            <!--MEMBER DATA-->

                            <form name="myForm" class="form-horizontal" autocomplete="off">

                                <div ng-show="wizarno=='product'">
                                    <fieldset>
                                        <div class="col-md-12">
                                            <div class="row">
                                                @*<div class="col-md-3">
                                                        <div>
                                                            <div class="image-wraper">

                                                                <img ng-src="/Images/member/plan.png" class="image-content" width="50" />
                                                            </div>
                                                        </div>
                                                    </div>*@
                                                <div class="col-md-10">
                                                    @*<div class="row">
                                                            <div class="col-md-12">
                                                                <h4 style="color:cornflowerblue">Current</h4>
                                                            </div>

                                                        </div>*@
                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <label class="caption">Class</label><br />
                                                            <label class="value">{{model.SubscriptType.ClassName}}</label>
                                                        </div>

                                                    </div>
                                                    <div class="row">

                                                        <div class="col-md-12">
                                                            <label class="caption">Price</label><br />
                                                            <label class="value">DRD Point {{model.Price | number}} @*/ {{model.PriceUnitDescr}}*@</label>
                                                        </div>

                                                    </div>
                                                    @*<div class="row">

                                                            <div class="col-md-12">
                                                                <label class="caption">Valid Until</label><br />
                                                                <label class="value">{{convertJsonDate(model.ValidPackage)|date}}</label>
                                                            </div>
                                                        </div>*@

                                                    @*<div class="row">

                                                            <div class="col-md-12">
                                                                <label class="caption">Activity Number</label><br />
                                                                <label class="value">{{model.FlowActivityCount}}</label>
                                                            </div>
                                                        </div>
                                                        <div class="row">

                                                            <div class="col-md-12">
                                                                <label class="caption">Rotation Number</label><br />
                                                                <label class="value">{{model.RotationCount}}</label>
                                                            </div>
                                                        </div>
                                                        <div class="row">

                                                            <div class="col-md-12">
                                                                <label class="caption">Quota Doc</label><br />
                                                                <label class="value">{{model.StorageSize}} GB</label>
                                                            </div>
                                                        </div>
                                                        <div class="row">

                                                            <div class="col-md-12">
                                                                <label class="caption">Expiry Doc <span style="font-size:xx-small">(after rotation completed)</span></label><br />
                                                                <label class="value">{{model.ExpiryDocDay}} day{{(model.ExpiryDocDay>1?"s":"")}}</label>
                                                            </div>
                                                        </div>*@
                                                </div>
                                                @*<div class="col-md-4">
                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                    <h4 style="color:cornflowerblue">Additional</h4>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                    <label class="caption">Activity Number</label><br />
                                                                    <label class="value">{{model.FlowActivityCountAdd}}</label>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                    <label class="caption">Total Activity Price</label><br />
                                                                    <label class="value">IDR {{(model.FlowActivityPrice * model.FlowActivityCountAdd) | number}}</label>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                    <label class="caption">Rotation Number</label><br />
                                                                    <label class="value">{{model.RotationCountAdd}}</label>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                    <label class="caption">Total Rotation Price</label><br />
                                                                    <label class="value">IDR {{(model.RotationPrice * model.RotationCountAdd) | number}}</label>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                    <label class="caption">Quota Doc</label><br />
                                                                    <label class="value">{{model.StorageSizeAdd}} GB</label>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                    <label class="caption">Total Quota Doc Price</label><br />
                                                                    <label class="value">IDR {{(model.StoragePrice * model.StorageSizeAdd) | number}}</label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>*@


                                                <table class="table-xs table-bordered table-striped" style="font-size:small;width:100%">
                                                    <tr style="font-size:larger;color:cadetblue">
                                                        <td>Item</td>
                                                        <td class="width-price">Package</td>
                                                        <td class="width-price">Extra</td>
                                                        <td class="width-price">Usage</td>
                                                        <td class="width-price">Balance</td>
                                                        <td class="width-total">Valid Until</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Rotation</td>
                                                        <td class="width-price">{{model.RotationCount | number}}</td>
                                                        <td class="width-price">{{model.RotationCountAdd | number}}</td>
                                                        <td class="width-price">{{model.RotationCountUsed | number}}</td>
                                                        <td class="width-price"><b>{{model.RotationCount+model.RotationCountAdd - model.RotationCountUsed | number}}</b></td>
                                                        <td class="width-total" rowspan="2">{{convertJsonDate(model.ValidPackage)|date:'dd MMM yyyy HH:mm'}}</td>
                                                    </tr>
                                                    @*<tr>
                                                        <td>Document Quota</td>
                                                        <td class="width-price">{{model.StorageSize | number}} MB</td>
                                                        <td class="width-price">{{model.StorageSizeAdd | number}} MB</td>
                                                        <td class="width-price">{{model.StorageSizeUsed | number}} MB</td>
                                                        <td class="width-price"><b>{{model.StorageSize+model.StorageSizeAdd - model.StorageSizeUsed | number}} MB</b></td>
                                                    </tr>
                                                    <tr>
                                                        <td style="color:red">DrDrive Quota</td>
                                                        <td class="width-price">{{model.DrDriveSize | number}} GB</td>
                                                        <td class="width-price">{{model.DrDriveSizeAdd | number}} GB</td>
                                                        <td class="width-price">{{model.DrDriveSizeUsed | number}} GB</td>
                                                        <td class="width-price"><b>{{model.DrDriveSize+model.DrDriveSizeAdd - model.DrDriveSizeUsed | number}} GB</b></td>
                                                        <td class="width-total">{{convertJsonDate(model.ValidDrDrive)|date:'dd MMM yyyy HH:mm'}}</td>
                                                    </tr>*@
                                                    <tr>
                                                        <td>Document Quota</td>
                                                        <td class="width-price">{{model.StrStorageSize}}</td>
                                                        <td class="width-price">{{model.StrStorageSizeAdd}}</td>
                                                        <td class="width-price">{{model.StrStorageSizeUsed}}</td>
                                                        <td class="width-price"><b>{{model.StrStorageSizeBal}}</b></td>
                                                    </tr>
                                                    <tr>
                                                        <td style="color:red">DrDrive Quota</td>
                                                        <td class="width-price">{{model.StrDrDriveSize}}</td>
                                                        <td class="width-price">{{model.StrDrDriveSizeAdd}}</td>
                                                        <td class="width-price">{{model.StrDrDriveSizeUsed}}</td>
                                                        <td class="width-price"><b>{{model.StrDrDriveSizeBal}}</b></td>
                                                        <td class="width-total">{{convertJsonDate(model.ValidDrDrive)|date:'dd MMM yyyy HH:mm'}}</td>
                                                    </tr>
                                                </table>

                                            </div>
                                        </div>
                                    </fieldset>
                                    <hr />
                                    <div class="col-md-12" ng-show="!upgradeplan && !upgradenode && !upgradedrdriveplan && !upgradeextraplan">
                                        <button type="button" class="btn btn-danger" ng-click="upgradePlan()">Upgrade Plan</button>
                                        <button type="button" class="btn bg-slate-400" ng-click="upgradeDrDrivePlan()">Upgrade DrDrive Plan</button>
                                        <button type="button" class="btn bg-orange-400" ng-click="upgradeExtraPlan()">Extra Quota</button>
                                        @*<button type="button" class="btn bg-slate-400" ng-click="upgradeNode()">Extra</button>*@
                                    </div>
                                    <div ng-show="upgradeplan">
                                        <h4>Upgrade Plan</h4>
                                        <div class="row">
                                            <div class="col-md-3" ng-repeat="x in subscriptTypes">
                                                <div class="panel">
                                                    <div class="panel-heading" style="background-color:{{(x.Id>=model.SubscriptTypeId?(x.PriceUnitCode=='CALL'?'#ffd54f':'#81d4fa'):'#eceff1')}}">
                                                        <h6 class="panel-title" style="margin-bottom:-10px;margin-top:-10px">
                                                            <span>{{x.ClassName}}</span>
                                                        </h6>
                                                    </div>
                                                    <div id="accordion-styled-group1" class="panel-collapse collapse in">
                                                        <div class="panel-body" ng-hide="x.PriceUnitCode=='CALL'">
                                                            <div style="font-size:xx-small">Price :</div><b><span ng-hide="x.Price==0" style="font-size:large;color:red;">DRD Point {{x.Price | number}} @*/ </span>{{x.PriceUnitDescr}}*@</b><br />
                                                            <hr />
                                                            <div style="font-size:xx-small">Rotation :</div><b>{{x.RotationCount}}</b><br />
                                                            @*<div style="font-size:xx-small">Activity :</div><b>{{x.FlowActivityCount}}</b><br />*@
                                                            <div style="font-size:xx-small">Document Quota :</div><b>{{x.StrStorageSize}}</b><br />
                                                            <div style="font-size:xx-small">Expiry :</div><b>{{x.PackageExpiryDay}} Days</b><br />
                                                        </div>
                                                        <div class="text-center" style="padding:10px" ng-show="x.Id==model.SubscriptTypeId">
                                                            <button class="btn bg-green-400 btn-xs" ng-click="saveUpgradePlan(x.Id, x.ClassName)">Buy</button>
                                                        </div>
                                                        <div class="text-center" style="padding:10px" ng-hide="x.Id<=model.SubscriptTypeId || x.PriceUnitCode=='CALL'">
                                                            <button class="btn btn-info btn-xs" ng-click="saveUpgradePlan(x.Id, x.ClassName)">Upgrade</button>
                                                        </div>
                                                        <div class="text-center" style="padding:10px" ng-hide="x.Id>=model.SubscriptTypeId || x.PriceUnitCode=='CALL'">
                                                            <button class="btn btn-default btn-xs" disabled="disabled"><span style="font-size:xx-small">Downgrade</span> CALL US</button>
                                                        </div>
                                                        <div class="text-center" style="padding:10px" ng-show="x.PriceUnitCode=='CALL'">
                                                            <button class="btn btn-warning btn-xs" ng-click="requestUpgradePlan(x.Id, x.ClassName)">Request</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <br />
                                        <div>
                                            <button class="btn btn-danger" ng-click="do_closedit()">Back</button>
                                        </div>
                                    </div>

                                    <div ng-show="upgradeextraplan">
                                        <h4>Upgrade Extra Plan</h4>
                                        <div class="row">
                                            <div class="col-md-3" ng-repeat="x in subscriptExtraTypes">
                                                <div class="panel">
                                                    <div id="accordion-styled-group1" class="panel-collapse collapse in">
                                                        <div class="panel-body">
                                                            <div style="font-size:xx-small">Price :</div><b><span ng-hide="x.Price==0" style="font-size:large;color:red;">DRD Point {{x.Price | number}}</b><br />
                                                            <hr />
                                                            <div ng-hide="x.RotationCount==0">
                                                                <div style="font-size:xx-small" ng-hide="x.RotationCount==0">Rotation :</div><b>{{x.RotationCount | number}}</b><br />
                                                            </div>
                                                            <div ng-hide="x.StorageSize==0">
                                                                <div style="font-size:xx-small">Document Quota :</div><b>{{x.StrStorageSize}}</b><br />
                                                            </div>
                                                            <div ng-hide="x.FlowActivityCount==0">
                                                                <div style="font-size:xx-small">Flow Activity :</div><b>{{x.FlowActivityCount | number}}</b><br />
                                                            </div>
                                                            <div ng-hide="x.DrDriveSize==0">
                                                                <div style="font-size:xx-small">DrDrive Quota :</div><b>{{x.StrDrDriveSize}}</b><br />
                                                            </div>
                                                        </div>
                                                        <div class="text-center" style="padding:10px">
                                                            <button class="btn bg-green-400 btn-xs" ng-click="saveUpgradeExtraPlan(x.Id)">Buy</button>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <br />
                                        <div>
                                            <button class="btn btn-danger" ng-click="do_closedit()">Back</button>
                                        </div>
                                    </div>

                                    <div ng-show="upgradedrdriveplan">
                                        <h4>Upgrade DrDrive Plan</h4>
                                        <div class="row">
                                            <div class="col-md-3" ng-repeat="x in drDriveTypes">
                                                <div class="panel">
                                                    <div id="accordion-styled-group1" class="panel-collapse collapse in">
                                                        <div class="panel-body">
                                                            <div style="font-size:xx-small">Price :</div><b><span ng-hide="x.Price==0" style="font-size:large;color:red;">DRD Point {{x.Price | number}}</span></b><br />
                                                            <hr />
                                                            <div style="font-size:xx-small">Quota :</div><b>{{x.StrSize}}</b><br />
                                                            <div style="font-size:xx-small">Expiry :</div><b>{{x.ExpiryDay}} Days</b><br />
                                                        </div>
                                                        <div class="text-center" style="padding:10px" ng-show="x.Size==model.DrDriveSize">
                                                            <button class="btn bg-green-400 btn-xs" ng-click="saveUpgradeDrDrivePlan(x.Id, x.StrSize)">Buy</button>
                                                        </div>
                                                        <div class="text-center" style="padding:10px" ng-hide="x.Size<=model.DrDriveSize">
                                                            <button class="btn btn-info btn-xs" ng-click="saveUpgradeDrDrivePlan(x.Id, x.StrSize)">Upgrade</button>
                                                        </div>
                                                        <div class="text-center" style="padding:10px" ng-hide="x.Size>=model.DrDriveSize">
                                                            <button class="btn btn-default btn-xs" disabled="disabled"><span style="font-size:xx-small">Downgrade</span> CALL US</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <br />
                                        <div>
                                            <button class="btn btn-danger" ng-click="do_closedit()">Back</button>
                                        </div>
                                    </div>


                                    <div ng-show="upgradenode">
                                        <h4>Extra</h4>
                                        <div>


                                            <table class="table-xs table-bordered table-striped" style="font-size:small;width:75%">
                                                <tr>
                                                    <td>Item</td>
                                                    <td class="width-qty">Qty Extra</td>
                                                    <td class="width-price">Price</td>
                                                    <td class="width-total">Total Price</td>
                                                </tr>
                                                @*<tr>
                                                        <td>Activity</td>
                                                        <td class="width-qty">
                                                            <input type="text" class="form-control" ng-model="flowNodeQty" ng-required="true" maxlength="3" ng-only-number style="width:50px" />
                                                        </td>
                                                        <td class="width-price">{{model.SubscriptType.FlowActivityPrice | number}} / Activity</td>
                                                        <td class="width-total">{{model.SubscriptType.FlowActivityPrice * flowNodeQty | number}}</td>
                                                    </tr>*@
                                                <tr>
                                                    <td>Rotation</td>
                                                    <td class="width-qty">
                                                        <input type="text" class="form-control" ng-model="rotationQty" ng-required="true" maxlength="3" ng-only-number style="width:125px" />
                                                    </td>
                                                    <td class="width-price">{{model.SubscriptType.RotationPrice | number}} / Rotation</td>
                                                    <td class="width-total">{{model.SubscriptType.RotationPrice*rotationQty | number}}</td>
                                                </tr>
                                                <tr>
                                                    <td>Document Quota</td>
                                                    <td class="width-qty">
                                                        <input type="text" class="form-control" ng-model="storageQty" ng-required="true" maxlength="6" ng-only-number style="width:125px" />
                                                    </td>
                                                    <td class="width-price">{{model.SubscriptType.StoragePrice | number}} / MB</td>
                                                    <td class="width-total">{{model.SubscriptType.StoragePrice*storageQty | number}}</td>
                                                </tr>
                                                <tr>
                                                    <td>DrDrive Quota</td>
                                                    <td class="width-qty">
                                                        <input type="text" class="form-control" ng-model="drdriveQty" ng-required="true" maxlength="3" ng-only-number style="width:125px" />
                                                    </td>
                                                    <td class="width-price">{{model.SubscriptType.DrDrivePrice | number}} / GB</td>
                                                    <td class="width-total">{{model.SubscriptType.DrDrivePrice*drdriveQty | number}}</td>
                                                </tr>
                                                <tr>
                                                    <td colspan="3">TOTAL</td>
                                                    <td class="width-grandtotal">
                                                        {{(model.SubscriptType.RotationPrice*rotationQty)+ (model.SubscriptType.StoragePrice*storageQty)+ (model.SubscriptType.DrDrivePrice*drdriveQty) | number}}
                                                    </td>
                                                </tr>
                                            </table>

                                            <br />
                                            <button class="btn btn-danger" ng-click="do_closedit()">Back</button>
                                            <button class="btn btn-success" ng-click="saveUpgradeNode()">Submit</button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                            <!--/MEMBER DATA-->
                            <!--CONFIRMATION THANK YOU-->
                            <!--/CONFIRMATION THANK YOU-->
                        </div>
                    </div>
                    <!-- /basic layout -->
                </div>
                <!-- /vertical form options -->
            </div>
            <!-- /Main content -->
        </div>
        <!-- /Page content -->
    </div>
    <!-- /Page container -->

    <script type="text/javascript">


        var myApp = angular.module('drdApp', ['ngAnimate', 'ui.bootstrap', 'ngSanitize', 'ngFileUpload', 'ngOnlyNumberApp'])

        myApp.controller("drdController", function ($scope, $sce, Upload, $location, $http, $filter) {

            $scope.model = {};
            $scope.subscriptTypes = [];
            $scope.subscriptExtraTypes = [];
            $scope.drDriveTypes = [];
            $scope.wizarno = 'product';
            $scope.model.Id = 0;
            $scope.upgradeplan=false;
            $scope.upgradedrdriveplan=false;
            $scope.upgradenode=false;
            $scope.upgradeextraplan=false;
            $scope.flowNodeQty=0;
            $scope.rotationQty=0;
            $scope.storageQty=0;
            $scope.drdriveQty=0;
            initValues();



            /*--------------------------------------------------------------
            INIT DATA
            --------------------------------------------------------------*/
            angular.element(document).ready(function () {
                $('#content').show();
            });

            function initValues() {
                var product = @Html.Raw(Json.Encode(Model.obj));
                $scope.model=product;
            }

            $scope.initData = function () {
            }
            $scope.upgradePlan = function () {
                $scope.getSubscriptTypes();
            }
            $scope.upgradeDrDrivePlan = function () {
                $scope.getDrDriveTypes();
            }
            $scope.upgradeExtraPlan = function () {
                $scope.getSubscriptExtraTypes();
            }
            //$scope.upgradeNode = function () {
            //    $scope.flowNodeQty=0;
            //    $scope.rotationQty=0;
            //    $scope.storageQty=0;
            //    $scope.drdriveQty=0;
            //    $scope.getSubscriptType();
            //}
            $scope.do_closedit = function () {
                $scope.upgradenode=false;
                $scope.upgradeplan=false;
                $scope.upgradedrdriveplan=false;
                $scope.upgradeextraplan=false;
            }
            /*--------------------------------------------------------------
            SAVE UPGRADE
            --------------------------------------------------------------*/
            $scope.saveUpgradePlan = function (id, name) {
                swal({
                    title: "Confirmation",
                    text: "Your plan will be upgraded/buy to <span style='color:#F8BB86'><b>"+name+"</b></span>,</br><span style='color:red'>Package automatically renew when deposit balance is sufficient.</span></br></br> continue?",
                    type: "warning",
                    showCancelButton: true,
                    closeOnConfirm: false,
                    confirmButtonColor: "#2196F3",
                    html: true,
                    showLoaderOnConfirm: true,
                    confirmButtonText: "Yes, upgrade it!",
                    cancelButtonText: "No, cancel please!",
                },
                function (isConfirm) {
                    //setTimeout(function () {
                    if (isConfirm){
                        $scope.submitUpgradePlan(id);
                    }
                    //swal.close();
                    //}, 500);

                });
            }
            $scope.submitUpgradePlan = function (id) {
                $http.post('@Url.Action("UpgradePlan", "Member")', {planId:id}).then(function (response) {
                    if (response.data) {
                        if (response.data==-1){
                            showInfo("Your deposit balance is insufficient to upgrade the plan");
                            return;
                        }
                        //location.reload();
                        $scope.getPlan();
                        swal.close();
                    }
                }, function (response) {
                    //error handle\
                    var x = 0;
                    swal.close();
                    showInfo("An error occurred, please try again");
                });
            }

            /*--------------------------------------------------------------
            SAVE UPGRADE EXTRA
            --------------------------------------------------------------*/
            $scope.saveUpgradeExtraPlan = function (id) {
                swal({
                    title: "Confirmation",
                    text: "Your plan will be add by extra quota, continue?",
                    type: "warning",
                    showCancelButton: true,
                    closeOnConfirm: false,
                    confirmButtonColor: "#2196F3",
                    html: true,
                    showLoaderOnConfirm: true,
                    confirmButtonText: "Yes, upgrade it!",
                    cancelButtonText: "No, cancel please!",
                },
                function (isConfirm) {
                    //setTimeout(function () {
                    if (isConfirm){
                        $scope.submitUpgradeExtraPlan(id);
                    }
                    //swal.close();
                    //}, 500);

                });
            }
            $scope.submitUpgradeExtraPlan = function (id) {
                $http.post('@Url.Action("UpgradeExtraPlan", "Member")', {planId:id}).then(function (response) {
                    if (response.data) {
                        if (response.data==-1){
                            showInfo("Your deposit balance is insufficient to upgrade the plan");
                            return;
                        }
                        //location.reload();
                        $scope.getPlan();
                        swal.close();
                    }
                }, function (response) {
                    //error handle\
                    var x = 0;
                    swal.close();
                    showInfo("An error occurred, please try again");
                });
            }

            /*--------------------------------------------------------------
            SAVE UPGRADE DRDRIVE
            --------------------------------------------------------------*/
            $scope.saveUpgradeDrDrivePlan = function (id, name) {
                swal({
                    title: "Confirmation",
                    text: "Your DrDrive plan will be upgraded/buy to <span style='color:#F8BB86'><b>"+name+"</b></span>, continue?",
                    type: "warning",
                    showCancelButton: true,
                    closeOnConfirm: false,
                    confirmButtonColor: "#2196F3",
                    html: true,
                    showLoaderOnConfirm: true,
                    confirmButtonText: "Yes, upgrade it!",
                    cancelButtonText: "No, cancel please!",
                },
                function (isConfirm) {
                    //setTimeout(function () {
                    if (isConfirm){
                        $scope.submitUpgradeDrDrivePlan(id);
                    }
                    //swal.close();
                    //}, 500);

                });
            }
            $scope.submitUpgradeDrDrivePlan = function (id) {
                $http.post('@Url.Action("UpgradeDrDrivePlan", "Member")', {driveId:id}).then(function (response) {
                    if (response.data) {
                        if (response.data==-1){
                            showInfo("Your deposit balance is insufficient to upgrade the plan");
                            return;
                        }
                        //location.reload();
                        $scope.getPlan();
                        swal.close();
                    }
                }, function (response) {
                    //error handle\
                    var x = 0;
                    swal.close();
                    showInfo("An error occurred, please try again");
                });
            }

            /*--------------------------------------------------------------
            SAVE REQUEST
            --------------------------------------------------------------*/
            $scope.requestUpgradePlan = function (id, name) {
                swal({
                    title: "Confirmation",
                    text: "Your plan will be upgraded to <span style='color:#F8BB86'><b>"+name+"</b></span> by request.<br/>This request will be sent to ours sales, continue?",
                    type: "warning",
                    showCancelButton: true,
                    closeOnConfirm: false,
                    confirmButtonColor: "#2196F3",
                    html: true,
                    showLoaderOnConfirm: true,
                    confirmButtonText: "Yes, upgrade request it!",
                    cancelButtonText: "No, cancel please!",
                },
                function (isConfirm) {
                    //setTimeout(function () {
                    if (isConfirm){
                        $scope.submitRequestUpgradePlan(id);
                    }
                    //swal.close();
                    //}, 500);

                });
            }
            $scope.submitRequestUpgradePlan = function (id) {
                $http.post('@Url.Action("UpgradePlanRequest", "Member")', {planId:id}).then(function (response) {
                    if (response.data) {
                        if (response.data==-1){
                            showInfo("We have received your upgrade plan request, wait for our sales person to contact you.");
                            return;
                        }
                        //location.reload();
                        $scope.getPlan();
                        swal.close();
                    }
                }, function (response) {
                    //error handle\
                    var x = 0;
                    swal.close();
                    showInfo("An error occurred, please try again");
                });
            }


            /*--------------------------------------------------------------
            SAVE UPGRADE NODE
            --------------------------------------------------------------*/
            $scope.saveUpgradeNode = function (id) {
                if (!$scope.myForm.$valid)
                    return;

                swal({
                    title: "Confirmation",
                    text: "Extra values will be increased, continue?",
                    type: "warning",
                    showCancelButton: true,
                    closeOnConfirm: false,
                    confirmButtonColor: "#2196F3",
                    html: true,
                    showLoaderOnConfirm: true,
                    confirmButtonText: "Yes, add it!",
                    cancelButtonText: "No, cancel please!",
                },
                function (isConfirm) {
                    //setTimeout(function () {
                    if (isConfirm){
                        $scope.submitUpgradeNode($scope.flowNodeAdd);
                    }
                    //swal.close();
                    //}, 500);

                });
            }

            $scope.submitUpgradeNode = function (qty) {
                $http.post('@Url.Action("UpgradeNode", "Member")',
                    {
                        nodeQty:$scope.flowNodeQty,
                        rotationQty:$scope.rotationQty,
                        sizeQty:$scope.storageQty,
                        drdriveQty:$scope.drdriveQty
                    }).then(function (response) {
                        if (response.data) {
                            if (response.data==-1){
                                showInfo("Your deposit balance is insufficient to upgrade additional");
                                return;
                            }
                            //location.reload();
                            $scope.getPlan();
                            swal.close();
                        }
                    }, function (response) {
                        //error handle\
                        var x = 0;
                        swal.close();
                        showInfo("An error occurred, please try again");
                    });
            }
            /*--------------------------------------------------------------
            GET
            --------------------------------------------------------------*/
            $scope.getSubscriptTypes = function () {
                $http.post('@Url.Action("GetAllExcluded", "SubscriptType")', {}).then(function (response) {
                    if (response.data) {
                        $scope.subscriptTypes = response.data;
                        $scope.upgradeplan=true;
                    }
                }, function (response) {
                    //error handle\
                    var x = 0;
                });
            }
            $scope.getSubscriptType = function () {
                $http.post('@Url.Action("GetById", "SubscriptType")', {}).then(function (response) {
                    if (response.data) {
                        $scope.model.SubscriptType = response.data;
                        $scope.upgradenode=true;
                    }
                }, function (response) {
                    //error handle\
                    var x = 0;
                });
            }

            $scope.getSubscriptExtraTypes = function () {
                $http.post('@Url.Action("GetAll", "SubscriptExtraType")', {}).then(function (response) {
                    if (response.data) {
                        $scope.subscriptExtraTypes = response.data;
                        $scope.upgradeextraplan=true;
                    }
                }, function (response) {
                    //error handle\
                    var x = 0;
                });
            }

            $scope.getDrDriveTypes = function () {
                $http.post('@Url.Action("GetAllExcluded", "DrDriveType")', {}).then(function (response) {
                    if (response.data) {
                        $scope.drDriveTypes = response.data;
                        $scope.upgradedrdriveplan=true;
                    }
                }, function (response) {
                    //error handle\
                    var x = 0;
                });
            }
            $scope.getPlan = function () {
                $http.post('@Url.Action("GetPlan", "member")', {}).then(function (response) {
                    if (response.data) {
                        $scope.model=response.data;
                        $scope.do_closedit();
                    }
                }, function (response) {
                    //error handle\
                    var x = 0;
                });
            }
            /*--------------------------------------------------------------
            GENERALD
            --------------------------------------------------------------*/
            $scope.scrollingPage = function (id) {
                $('html, body').animate({
                    scrollTop: $(id).offset().top
                }, 200);
            }
            /*--------------------------------------------------------------
            CONVERT JSON DATE
            --------------------------------------------------------------*/
            $scope.convertJsonDate = function (val) {
                if (val == undefined)
                    return '';
                return new Date(parseInt(val.substr(6)));
            }
            function convertJsonDate(val) {
                if (val == undefined)
                    return '';
                return new Date(parseInt(val.substr(6)));
            }
        });


        $(function () {
        });


        $(document).ready(function () {
            $('#checkbox1').bootstrapSwitch();
        })

    </script>

</body>